<!-- Search Bar Component -->
<div class="search-container relative max-w-5xl mx-auto">
    <form method="get" action="{% url 'jobs:job_list' %}" class="relative">
        <!-- Main Search Bar -->
        <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none">
                <i class="fas fa-search text-gray-400"></i>
            </div>
            <input type="text" 
                   name="keyword" 
                   id="search-input"
                   placeholder="Job title, company, or keywords"
                   class="w-full pl-12 pr-24 py-4 text-lg border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-100 focus:border-primary-400 transition-all duration-200 shadow-sm hover:shadow-md text-gray-800 placeholder-gray-400 bg-white"
                   autocomplete="off">
            
            <button type="submit" 
                    id="search-button"
                    class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-primary-600 hover:bg-primary-700 text-white font-medium py-2.5 px-6 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 shadow-sm hover:shadow-md flex items-center">
                <i class="fas fa-search mr-2"></i> Search
            </button>
        </div>
        
        <!-- Advanced Search Options -->
        <div class="mt-4 bg-white p-5 rounded-xl shadow-sm border border-gray-100" id="advanced-options">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-5">
                <!-- Location -->
                <div class="space-y-1">
                    <label for="location" class="block text-sm font-medium text-gray-700">Location</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-map-marker-alt text-gray-400"></i>
                        </div>
                        <input type="text" 
                               id="location"
                               name="location" 
                               placeholder="City, state, or remote"
                               class="w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-800 bg-white text-sm transition-colors">
                    </div>
                </div>
                
                <!-- Experience -->
                <div class="space-y-1">
                    <label for="experience" class="block text-sm font-medium text-gray-700">Experience</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-briefcase text-gray-400"></i>
                        </div>
                        <select id="experience" 
                                name="experience" 
                                class="w-full pl-10 pr-8 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-800 bg-white text-sm appearance-none transition-colors">
                            <option value="">Any Experience</option>
                            <option value="fresher">Fresher</option>
                            <option value="0-1">0-1 years</option>
                            <option value="1-3">1-3 years</option>
                            <option value="3-5">3-5 years</option>
                            <option value="5-10">5-10 years</option>
                            <option value="10+">10+ years</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                            <i class="fas fa-chevron-down text-gray-400 text-xs"></i>
                        </div>
                    </div>
                </div>
                
                <!-- Job Type -->
                <div class="space-y-1">
                    <label for="job_type" class="block text-sm font-medium text-gray-700">Job Type</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-clock text-gray-400"></i>
                        </div>
                        <select id="job_type" 
                                name="job_type" 
                                class="w-full pl-10 pr-8 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-800 bg-white text-sm appearance-none transition-colors">
                            <option value="">All Job Types</option>
                            <option value="full-time">Full-time</option>
                            <option value="part-time">Part-time</option>
                            <option value="contract">Contract</option>
                            <option value="internship">Internship</option>
                            <option value="remote">Remote</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                            <i class="fas fa-chevron-down text-gray-400 text-xs"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Search Button for Mobile -->
            <div class="mt-5 md:hidden">
                <button type="submit" 
                        class="w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-6 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 shadow-sm hover:shadow-md flex items-center justify-center">
                    <i class="fas fa-search mr-2"></i> Search Jobs
                </button>
            </div>
        </div>
    </form>
</div>

<style>
    /* Search bar animations */
    @keyframes subtlePulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.02); }
        100% { transform: scale(1); }
    }
    
    .search-container:hover #search-input {
        border-color: #3b82f6;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.05);
    }
    
    .search-container:hover #search-button {
        animation: subtlePulse 2s infinite;
    }
    
    /* Style select dropdown arrow */
    select {
        -webkit-appearance: none;
        -moz-appearance: none;
        background-image: url("data:image/svg+xml;utf8,<svg fill='%239ca3af' height='16' viewBox='0 0 24 24' width='16' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>");
        background-repeat: no-repeat;
        background-position-x: calc(100% - 12px);
        background-position-y: 50%;
        background-size: 12px;
    }
    
    /* Better focus states */
    input:focus, select:focus {
        --tw-ring-color: rgba(59, 130, 246, 0.5) !important;
        border-color: #3b82f6 !important;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
    }
    
    /* Custom scrollbar for select dropdowns */
    select::-ms-expand {
        display: none;
    }
    
    /* Smooth transitions */
    input, select, button {
        transition: all 0.2s ease-in-out;
    }
    
    /* Hover effects */
    input:hover, select:hover {
        border-color: #9ca3af;
    }
    
    /* Remove number input spinners */
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize mo.js timeline
    const timeline = new mojs.Timeline();
    
    // Create burst animation for search button
    const burst = new mojs.Burst({
        parent: '#search-button',
        radius: { 0: 50 },
        count: 4,
        children: {
            shape: 'circle',
            fill: 'rgba(59, 130, 246, 0.4)',
            duration: 1200,
            easing: 'cubic-bezier(0.1, 0.1, 0.1, 1)'
        }
    });
    
    // Add animation to timeline
    timeline.add(burst);
    
    // Event listeners
    const searchButton = document.getElementById('search-button');
    const searchInput = document.getElementById('search-input');
    
    // Play animation on button click
    searchButton.addEventListener('click', function(e) {
        if (searchInput.value.trim() === '') {
            e.preventDefault();
            
            // Shake animation if search is empty
            searchInput.animate([
                { transform: 'translateX(0)' },
                { transform: 'translateX(-3px)' },
                { transform: 'translateX(3px)' },
                { transform: 'translateX(0)' }
            ], {
                duration: 200,
                iterations: 2
            });
            
            searchInput.focus();
        } else {
            // Play burst animation on valid search
            timeline.replay();
        }
    });
    
    // Handle form submission to include all parameters
    const form = document.querySelector('form');
    form.addEventListener('submit', function(e) {
        const searchTerm = searchInput.value.trim();
        if (searchTerm === '') {
            e.preventDefault();
            searchInput.focus();
        }
    });
});
</script>
